/* Grid */
.grid {
  display: grid;
  gap: var(--space-lg);

  /* FIX: stop vertical stretching of cards */
  align-items: start;        /* FIX */
}

/* Grid with maximized card */
.grid.has-maximized-card {
  position: relative;
  z-index: 1;
  animation: gridShrink 0.3s ease-out forwards;
}

.grid.has-maximized-card .card:not(.is-maximized) {
  opacity: 0.3;
  filter: blur(2px);
  pointer-events: none;
  transform: scale(0.98);
  transition: all 0.3s ease;
}

/* When card is maximized */
body.card-max-open .grid.grid-cols-3 {
  grid-template-columns: 1fr;
}

body.card-max-open .grid.grid-cols-3 .card:not(.is-maximized) {
  display: none;
}

/* Animations */
@keyframes gridShrink {
  from {
    gap: var(--space-lg);
    opacity: 1;
  }
  to {
    gap: var(--space-xs);
    opacity: 0.3;
  }
}

@keyframes gridExpand {
  from {
    gap: var(--space-xs);
    opacity: 0.3;
  }
  to {
    gap: var(--space-lg);
    opacity: 1;
  }
}

.grid:not(.has-maximized-card) {
  animation: gridExpand 0.3s ease-out forwards;
}
