<!DOCTYPE html>
<html lang="en" data-theme="professional-blue">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PromptCraft Pro</title>

  <!-- Fonts + Icons -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

  <!-- Main CSS (your import file) -->
  <link rel="stylesheet" href="css/main.css" />

  <style>
    /* ================================
       PAGE-SCOPED ENHANCEMENTS
       (kept here to match your current file)
       ================================ */

    /* ====== ENHANCED LAYOUT ====== */
    .app-container {
      display: flex;
      min-height: 100vh;
      background: var(--bg-body);
    }

    /* Enhanced Sidebar */
    .sidebar {
      width: 240px;
      background: var(--bg-surface);
      border-right: 1px solid var(--border-light);
      display: flex;
      flex-direction: column;
      position: sticky;
      top: 0;
      height: 100vh;
      z-index: 40;
    }

    /* Main Content Area */
    .main-content {
      flex: 1;
      padding: clamp(16px, 2.2vw, 28px);
      overflow-y: auto;
    }

    /* ====== ENHANCED HEADER ====== */
    .main-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: var(--space-2xl);
      padding-bottom: var(--space-lg);
      border-bottom: 1px solid var(--border-light);
    }

    .header-left {
      display: flex;
      align-items: center;
      gap: var(--space-md);
    }

    .header-logo {
      width: 48px;
      height: 48px;
      background: var(--gradient-primary);
      border-radius: var(--radius-lg);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 1.5rem;
      font-weight: 700;
    }

    .header-title h1 {
      font-size: 1.875rem;
      font-weight: 700;
      background: var(--gradient-primary);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      margin-bottom: 0.25rem;
    }

    .header-title p {
      font-size: 0.875rem;
      color: var(--text-tertiary);
    }

    /* Enhanced Header Actions */
    .header-actions {
      display: flex;
      align-items: center;
      gap: var(--space-sm);
    }

    .header-action-btn {
      width: 40px;
      height: 40px;
      border-radius: var(--radius-md);
      background: var(--bg-surface);
      border: 1px solid var(--border-light);
      color: var(--text-secondary);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all var(--transition-base);
    }

    .header-action-btn:hover {
      background: var(--bg-card);
      color: var(--primary);
      border-color: var(--primary);
      transform: translateY(-2px);
    }

    .usage-badge {
      padding: 0.5rem 1rem;
      background: var(--gradient-primary);
      color: white;
      border-radius: var(--radius-full);
      font-size: 0.875rem;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    /* ====== ENHANCED CARDS GRID (RESPONSIVE FIX) ====== */
    .cards-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: clamp(16px, 2vw, 24px);
      margin-top: var(--space-lg);
      align-items: start;
    }

    /* Keep 3 cards in a row on most laptops */
    @media (max-width: 1100px) {
      .cards-grid { grid-template-columns: repeat(2, 1fr); }
    }

    @media (max-width: 768px) {
      .cards-grid { grid-template-columns: 1fr; }
    }

    /* ====== ENHANCED CARDS ====== */
    .step-card {
      background: var(--bg-surface);
      border: 1px solid var(--border-light);
      border-radius: var(--radius-xl);
      overflow: hidden;
      box-shadow: var(--shadow-md);
      transition: all var(--transition-base);
      position: relative;
    }

    .step-card:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-lg);
      border-color: var(--primary);
    }

    .step-header {
      padding: var(--space-lg);
      border-bottom: 1px solid var(--border-light);
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: var(--space-md);
    }

    .step-number {
      width: 36px;
      height: 36px;
      border-radius: var(--radius-full);
      background: var(--gradient-primary);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      flex-shrink: 0;
    }

    .step-info {
      flex: 1;
      min-width: 0;
    }

    .step-info h2 {
      font-size: 1.125rem;
      font-weight: 700;
      margin-bottom: 0.25rem;
    }

    .step-info p {
      font-size: 0.875rem;
      color: var(--text-tertiary);
      margin: 0;
    }

    .step-actions {
      display: flex;
      align-items: center;
      gap: var(--space-xs);
      flex-shrink: 0;
    }

    .icon-btn {
      width: 36px;
      height: 36px;
      border-radius: var(--radius-md);
      background: var(--bg-card);
      border: 1px solid var(--border-light);
      color: var(--text-secondary);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all var(--transition-base);
    }

    .icon-btn:hover {
      background: rgba(255, 94, 0, 0.08);
      color: var(--primary);
      border-color: var(--primary);
    }

    .step-content {
      padding: var(--space-lg);
    }

    /* ====== INPUT AREA ====== */
    .input-label {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: var(--space-sm);
    }

    .input-label span {
      font-size: 0.875rem;
      font-weight: 600;
      color: var(--text-secondary);
    }

    .textarea-container {
      position: relative;
    }

    textarea {
      width: 100%;
      min-height: 220px;
      padding: var(--space-md);
      border-radius: var(--radius-lg);
      border: 1px solid var(--border-light);
      background: var(--bg-card);
      color: var(--text-primary);
      font-family: 'Inter', sans-serif;
      font-size: 0.95rem;
      resize: vertical;
      outline: none;
      transition: border-color var(--transition-base);
    }

    textarea:focus {
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(255, 94, 0, 0.12);
    }

    .textarea-actions {
      position: absolute;
      top: 10px;
      right: 10px;
      display: flex;
      gap: 8px;
      z-index: 5;
    }

    /* ====== OUTPUT AREA ====== */
    .output-container {
      position: relative;
    }

    .output-area {
      width: 100%;
      min-height: 220px;
      padding: var(--space-md);
      border-radius: var(--radius-lg);
      border: 1px solid var(--border-light);
      background: var(--bg-card);
      color: var(--text-primary);
      font-family: 'Inter', sans-serif;
      font-size: 0.95rem;
      white-space: pre-wrap;
      overflow: auto;
    }

    /* ====== PRIMARY CTA ====== */
    .primary-btn {
      width: 100%;
      margin-top: var(--space-md);
      padding: 0.9rem 1rem;
      border-radius: var(--radius-lg);
      border: none;
      background: var(--gradient-primary);
      color: white;
      font-weight: 700;
      cursor: pointer;
      transition: transform var(--transition-base), box-shadow var(--transition-base);
    }

    .primary-btn:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-lg);
    }

    /* ====== ENHANCED AI TOOLS CARD (SIMPLIFIED + SMALLER) ====== */
    .ai-tools-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
      gap: var(--space-md);
      margin-top: var(--space-md);
    }

    .ai-tool-card {
      background: var(--bg-card);
      border: 1px solid var(--border-medium);
      border-radius: var(--radius-lg);
      padding: var(--space-md);
      transition: all var(--transition-base);
      cursor: pointer;
    }

    .ai-tool-card:hover {
      transform: translateY(-3px);
      border-color: var(--primary);
      box-shadow: var(--shadow-lg);
    }

    .ai-tool-card.disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .ai-tool-card.disabled:hover {
      transform: none;
      border-color: var(--border-medium);
      box-shadow: none;
    }

    .ai-tool-header {
      display: flex;
      align-items: center;
      gap: var(--space-md);
      margin: 0;
    }

    .ai-tool-icon {
      width: 40px;
      height: 40px;
      border-radius: var(--radius-lg);
      background: var(--gradient-primary);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 1.05rem;
      flex-shrink: 0;
    }

    .ai-tool-info h4 {
      margin: 0;
      font-size: 0.95rem;
      font-weight: 800;
      line-height: 1.2;
    }

    .ai-tool-info p {
      margin: 0.2rem 0 0 0;
      font-size: 0.8rem;
      color: var(--text-tertiary);
      line-height: 1.25;
    }

    /* Sidebar (simplified) */
    .sidebar-header { padding: var(--space-lg); border-bottom: 1px solid var(--border-light); }
    .sidebar-brand { display: flex; align-items: center; gap: var(--space-md); }
    .brand-icon {
      width: 40px; height: 40px; border-radius: var(--radius-lg);
      background: var(--gradient-primary); color: #fff;
      display: flex; align-items: center; justify-content: center;
      font-weight: 800; letter-spacing: 0.02em;
    }
    .brand-text h2 { font-size: 1.05rem; margin: 0; }
    .brand-text p { margin: 0; font-size: 0.8rem; color: var(--text-tertiary); }
    .sidebar-nav { padding: var(--space-lg); display: flex; flex-direction: column; gap: var(--space-sm); }
    .sidebar-bottom { margin-top: auto; padding: var(--space-lg); border-top: 1px solid var(--border-light); }
    .meta-pill {
      display: inline-flex; align-items: center; gap: 0.5rem;
      padding: 0.375rem 0.625rem; border-radius: var(--radius-full);
      background: rgba(255, 255, 255, 0.04); border: 1px solid var(--border-light);
      color: var(--text-secondary); font-size: 0.8125rem;
    }

    /* muted note */
    .muted-note{
      margin-top: var(--space-md);
      color: var(--text-tertiary);
      font-size: 0.875rem;
    }

    /* ====== FLOATING THEME BUTTON (BOTTOM RIGHT) ====== */
    .floating-theme-btn {
      position: fixed;
      right: 18px;
      bottom: 18px;
      width: 44px;
      height: 44px;
      border-radius: var(--radius-lg);
      border: 1px solid var(--border-light);
      background: var(--bg-surface);
      color: var(--text-secondary);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      z-index: 9999;
      box-shadow: var(--shadow-md);
      transition: all var(--transition-base);
    }
    .floating-theme-btn:hover {
      transform: translateY(-2px);
      border-color: var(--primary);
      color: var(--primary);
      background: var(--bg-card);
    }
  </style>
</head>

<body>
  <a class="skip-to-content" href="#main">Skip to content</a>

  <div class="app-container">

    <!-- ✅ SIMPLIFIED LEFT PANEL (NO BULKY OPTIONS) -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <div class="sidebar-brand">
          <div class="brand-icon">PC</div>
          <div class="brand-text">
            <h2>PromptCraft</h2>
            <p>Idea → Structured Prompt</p>
          </div>
        </div>
      </div>

      <nav class="sidebar-nav" aria-label="Primary">
        <button class="nav-item nav-item-active" type="button" data-nav="builder">
          <i class="fas fa-wand-magic-sparkles"></i>
          <span>Prompt Builder</span>
        </button>
      </nav>

      <div class="sidebar-bottom">
        <div class="sidebar-meta">
          <span class="meta-pill"><i class="fas fa-code-branch"></i> v1.2</span>
        </div>
      </div>
    </aside>

    <!-- Main content -->
    <main id="main" class="main-content">

      <header class="main-header">
        <div class="header-left">
          <div class="header-logo">PC</div>
          <div class="header-title">
            <h1>PromptCraft Pro</h1>
            <p>Turn messy ideas into a clean, reusable prompt</p>
          </div>
        </div>

        <div class="header-actions">
          <div class="usage-badge" id="usageBadge">
            <i class="fas fa-bolt"></i>
            <span id="usageCount">0</span>
          </div>

          <button class="header-action-btn" id="settingsBtn" title="Settings">
            <i class="fas fa-gear"></i>
          </button>
        </div>
      </header>

      <!-- Cards grid -->
      <div class="cards-grid">

        <!-- Step 1 -->
        <section class="step-card" id="stepIdeaCard">
          <div class="step-header">
            <div class="step-number">1</div>
            <div class="step-info">
              <h2>Your Idea</h2>
              <p>Type or speak your raw request.</p>
            </div>
            <div class="step-actions">
              <button class="icon-btn" id="ideaMaximizeBtn" title="Maximize">
                <i class="fas fa-up-right-and-down-left-from-center"></i>
              </button>
            </div>
          </div>

          <div class="step-content">
            <div class="input-label">
              <span>Idea</span>
            </div>

            <div class="textarea-container">
              <textarea id="ideaInput" placeholder="Example: Write 4 Jira user stories for Fusion ERP + TR OneSource tax integration..."></textarea>

              <div class="textarea-actions">
                <button class="icon-btn" id="micBtn" title="Voice input">
                  <i class="fas fa-microphone"></i>
                </button>
                <button class="icon-btn" id="clearIdeaBtn" title="Clear">
                  <i class="fas fa-eraser"></i>
                </button>
              </div>
            </div>

            <button class="primary-btn" id="generatePromptBtn">
              Generate Structured Prompt
            </button>
          </div>
        </section>

        <!-- Step 2 -->
        <section class="step-card" id="stepPromptCard">
          <div class="step-header">
            <div class="step-number">2</div>
            <div class="step-info">
              <h2>Structured Prompt</h2>
              <p>Copy & use in your AI tool.</p>
            </div>
            <div class="step-actions">
              <button class="icon-btn" id="promptCopyBtn" title="Copy">
                <i class="fas fa-copy"></i>
              </button>
              <button class="icon-btn" id="promptMaximizeBtn" title="Maximize">
                <i class="fas fa-up-right-and-down-left-from-center"></i>
              </button>
            </div>
          </div>

          <div class="step-content">
            <div class="output-container">
              <div class="output-area" id="promptOutput" aria-label="Structured prompt output"></div>
            </div>
          </div>
        </section>

        <!-- ✅ Step 3 (SIMPLIFIED + COMPACT) -->
        <section class="step-card">
          <div class="step-header">
            <div class="step-number">3</div>
            <div class="step-info">
              <h2>AI Tools</h2>
              <p>Pick the best tool for your generated prompt.</p>
            </div>
            <div class="step-actions">
              <button class="icon-btn" id="refreshToolsBtn" title="Refresh">
                <i class="fas fa-rotate-right"></i>
              </button>
            </div>
          </div>

          <div class="step-content">
            <div class="ai-tools-grid" id="aiToolsGrid" aria-live="polite"></div>
            <div class="muted-note" id="aiToolsHint">Generate a structured prompt to unlock tool suggestions.</div>
          </div>
        </section>

      </div>
    </main>
  </div>

  <!-- Settings Modal (your existing file/markup loader will manage this) -->
  <div id="modalRoot"></div>

  <!-- JS entry -->
  <script type="module" src="js/app.js"></script>

  <!-- ✅ Palette icon moved to bottom-right (requested) -->
  <button class="floating-theme-btn" id="themeToggleBtn" type="button" title="Themes">
    <i class="fas fa-palette"></i>
  </button>
</body>
</html>
