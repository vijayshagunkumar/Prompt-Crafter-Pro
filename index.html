<!DOCTYPE html>
<html lang="en">
<head>
    <base href="/Prompt-Crafter-Pro/">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PromptCraft | Prompt Crafter Pro</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"/>
    <link rel="icon" type="image/x-icon" href="assets/IconLogo.ico">
    <link rel="stylesheet" href="styles/variables.css">
    <link rel="stylesheet" href="styles/themes.css">
    <link rel="stylesheet" href="styles/main.css">
</head>
<body>
    <div class="scan-line"></div>
    <div id="particles" class="particles"></div>
    <div id="expandOverlay" class="expand-overlay" style="display: none;"></div>
    
    <div id="notification" class="notification">
        <i class="fas fa-info-circle"></i>
        <span id="notificationText">Notification message</span>
    </div>

    <div class="page">
        <!-- HERO SECTION -->
        <header class="hero">
            <div class="hero-top">
                <div class="hero-brand">
                   <div class="hero-logo">
  <div class="logo-circuit">
    <div class="circuit-line circuit-horizontal"></div>
    <div class="circuit-line circuit-vertical"></div>
    <div class="circuit-node circuit-node-1"></div>
    <div class="circuit-node circuit-node-2"></div>
    <div class="circuit-node circuit-node-3"></div>
    <div class="circuit-node circuit-node-4"></div>
  </div>
</div>
                    <div class="hero-title-block">
                        <h1 class="hero-title">Master the Art of <span>Prompt Engineering</span></h1>
                        <p class="hero-subtitle">Turn rough ideas into optimized, ready-to-run prompts for AI tools.</p>
                    </div>
                </div>

                <button class="settings-btn" id="settingsBtn">
                    <i class="fas fa-cog"></i> Settings
                </button>
            </div>
        </header>

        <!-- MAIN WORKFLOW -->
        <main class="workflow">
            <div class="cards-grid">
                <!-- CARD 1: YOUR IDEA -->
                <section class="step-card">
                    <div class="step-header">
                        <div class="step-pill">1</div>
                        <div class="step-header-main">
                            <h2>YOUR IDEA</h2>
                            <p class="step-subtitle">Describe what you want the AI to do</p>
                        </div>
                        <div class="step-meta">
                            <span class="meta-pill">
                                <i class="fas fa-clock"></i>
                                <span id="timerValue">60s</span>
                            </span>
                            <div id="timerDisplay" class="meta-pill" style="display: none;">
                                <i class="fas fa-hourglass-half"></i>
                                <span id="timerValue">60s</span>
                            </div>
                        </div>
                    </div>

                    <div id="intentRow" class="intent-row" style="display:none;">
                        <div id="intentScroll" class="intent-scroll"></div>
                    </div>

                    <div class="chip-row">
                        <div class="chip example-btn" data-example="Write a professional email to my manager requesting leave for 3 days.">
                            <i class="fas fa-envelope"></i> Email
                        </div>
                        <div class="chip example-btn" data-example="Create a Python function to validate email addresses with regex.">
                            <i class="fas fa-code"></i> Code
                        </div>
                        <div class="chip example-btn" data-example="Analyze market trends for electric vehicles in 2024.">
                            <i class="fas fa-chart-line"></i> Analysis
                        </div>
                        <div class="chip example-btn" data-example="Write a LinkedIn post about AI productivity tools.">
                            <i class="fas fa-pen"></i> Writing
                        </div>
                    </div>

                    <div class="auto-row">
                        <label class="toggle-switch">
                            <input type="checkbox" id="autoConvert" checked>
                            <span class="toggle-slider"></span>
                            <span class="toggle-label">Auto-Convert</span>
                        </label>
                    </div>

                    <div class="field-block">
                        <div class="textarea-wrapper">
                            <textarea id="requirement" class="textarea-idea" placeholder="Example: Write a professional email to my manager requesting leave for 3 days..."></textarea>
                            <button id="expandInputBtn" class="expand-btn" title="Expand">
                                <i class="fas fa-expand-alt"></i>
                            </button>
                            <span id="inputSizeInfo" class="size-info">250px</span>
                            <div class="textarea-buttons">
                                <button id="clearInputBtn" class="clear-input-btn" title="Clear text">
                                    <i class="fas fa-broom"></i>
                                </button>
                                <button id="voiceInputBtn" class="voice-input-btn" title="Voice Input">
                                    <i class="fas fa-microphone"></i>
                                </button>
                            </div>
                        </div>
                        <div id="voiceInputStatus" class="voice-status" style="display: none;">
                            <i class="fas fa-microphone"></i> Listening...
                        </div>
                    </div>

                    <div class="stats-row">
                        <span id="charCount">0 characters</span>
                        <span id="wordCount">0 words</span>
                        <span id="lineCount">1 line</span>
                    </div>

                    <button id="convertBtn" class="btn-primary btn-full" disabled>
                        <i class="fas fa-magic"></i> Convert
                    </button>

                    <button id="resetBtn" class="btn-ghost-small" style="margin-top: 12px; width: 100%;">
                        <i class="fas fa-redo"></i> Reset Everything
                    </button>

                    <div class="template-section" style="margin-top: 20px;">
                        <div class="template-toggle" id="toggleTemplatesBtn">
                            <div class="template-toggle-left">
                                <span class="template-toggle-eye"><i class="fas fa-eye"></i></span>
                                <span>Template Library</span>
                            </div>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        
                        <div id="templatesPanel" class="templates-panel" style="display: none;">
                            <div class="templates-header">
                                <div class="templates-header-left">
                                    <div class="templates-title">Templates</div>
                                    <div class="templates-sub">Save and reuse prompt patterns</div>
                                </div>
                                <div class="templates-actions-inline">
                                    <button id="addTemplateBtn" class="btn-ghost-small">
                                        <i class="fas fa-plus"></i> New Template
                                    </button>
                                </div>
                            </div>
                            
                            <input type="text" id="templateSearch" class="input-search" placeholder="Search templates...">
                            
                            <div id="templateCategories" class="template-categories"></div>
                            
                            <div id="templatesGrid" class="templates-grid"></div>
                            
                            <div id="emptyTemplates" class="empty-state" style="display: none;">
                                <i class="fas fa-inbox"></i>
                                <div>No templates yet. Create your first one!</div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- CARD 2: STRUCTURED PROMPT -->
                <section class="step-card card-output">
                    <div class="step-header">
                        <div class="step-pill">2</div>
                        <div class="step-header-main">
                            <h2>STRUCTURED PROMPT</h2>
                            <p class="step-subtitle">Optimized, ready-to-run prompt</p>
                        </div>
                        <div class="step-meta">
                            <div class="timer-badge">
                                <i class="fas fa-cog"></i>
                                <span id="presetInfo" style="display: none;"></span> <!-- Issue #3: Hidden permanently -->
                            </div>
                            <span id="convertedBadge" class="meta-pill" style="display: none;">
                                <i class="fas fa-check"></i> Converted
                            </span>
                        </div>
                    </div>

                    <div class="preset-selector">
                        <div class="preset-option active" data-preset="default">
                            <i class="fas fa-star"></i> Standard
                        </div>
                        <div class="preset-option" data-preset="claude">
                            <i class="fas fa-brain"></i> Claude
                        </div>
                        <div class="preset-option" data-preset="chatgpt">
                            <i class="fas fa-robot"></i> ChatGPT
                        </div>
                        <div class="preset-option" data-preset="detailed">
                            <i class="fas fa-list-check"></i> Detailed
                        </div>
                    </div>

                    <div class="field-block-output">
                        <div class="textarea-wrapper">
                            <textarea id="output" class="output-textarea" placeholder="Your structured prompt will appear here..." readonly></textarea>
                            <button id="expandOutputBtn" class="expand-btn" title="Expand">
                                <i class="fas fa-expand-alt"></i>
                            </button>
                            <span id="outputSizeInfo" class="size-info">250px</span>
                            <div class="textarea-buttons">
                                <button id="copyOutputBtn" class="btn-ghost-small" style="margin-right: 8px;">
                                    <i class="fas fa-copy"></i> Copy
                                </button>
                                <button id="voiceOutputBtn" class="voice-output-btn" title="Read Aloud" style="display: none;">
                                    <i class="fas fa-volume-up"></i>
                                </button>
                            </div>
                        </div>
                        <div id="voiceOutputStatus" class="voice-status" style="display: none;">
                            <i class="fas fa-volume-up"></i> Reading...
                        </div>
                    </div>

                    <div class="stats-row output-stats">
                        <span id="outputCharCount">0 characters</span>
                        <span id="outputWordCount">0 words</span>
                        <span id="outputLineCount">1 line</span>
                    </div>

                    <div class="output-footer">
                        <div class="output-actions">
                            <button id="exportBtn" class="btn-ghost-small">
                                <i class="fas fa-download"></i> Export
                            </button>
                        </div>
                        <button id="toggleHistoryBtn" class="btn-ghost-small">
                            <i class="fas fa-history"></i> History
                        </button>
                    </div>

                    <div id="historyPanel" class="history-panel" style="display: none;">
                        <div class="history-header">
                            <span>Recent Prompts</span>
                            <button id="clearHistoryBtn" class="btn-ghost-small danger">
                                <i class="fas fa-trash"></i> Clear
                            </button>
                        </div>
                        <div id="historyList"></div>
                    </div>
                </section>

                <!-- CARD 3: LAUNCH -->
                <section class="step-card">
                    <div class="step-header">
                        <div class="step-pill">3</div>
                        <div class="step-header-main">
                            <h2>LAUNCH</h2>
                            <!-- Issue #5: Removed the hint text, will show as tooltip on hover -->
                        </div>
                    </div>

                    <div class="launch-list">
                        <button class="launch-btn launch-chatgpt" id="chatgptBtn" disabled>
                            <div class="launch-icon">
                                <i class="fas fa-robot"></i>
                            </div>
                            <div class="launch-text">
                                <div class="launch-name">ChatGPT</div>
                                <div class="launch-sub">chat.openai.com</div>
                            </div>
                        </button>

                        <button class="launch-btn launch-claude" id="claudeBtn" disabled>
                            <div class="launch-icon">
                                <i class="fas fa-brain"></i>
                            </div>
                            <div class="launch-text">
                                <div class="launch-name">Claude</div>
                                <div class="launch-sub">claude.ai</div>
                            </div>
                        </button>

                        <button class="launch-btn launch-gemini" id="geminiBtn" disabled>
                            <div class="launch-icon">
                                <i class="fas fa-gem"></i>
                            </div>
                            <div class="launch-text">
                                <div class="launch-name">Gemini</div>
                                <div class="launch-sub">gemini.google.com</div>
                            </div>
                        </button>

                        <button class="launch-btn launch-perplexity" id="perplexityBtn" disabled>
                            <div class="launch-icon">
                                <i class="fas fa-search"></i>
                            </div>
                            <div class="launch-text">
                                <div class="launch-name">Perplexity</div>
                                <div class="launch-sub">perplexity.ai</div>
                            </div>
                        </button>

                        <button class="launch-btn launch-deepseek" id="deepseekBtn" disabled>
                            <div class="launch-icon">
                                <i class="fas fa-code"></i>
                            </div>
                            <div class="launch-text">
                                <div class="launch-name">DeepSeek</div>
                                <div class="launch-sub">chat.deepseek.com</div>
                            </div>
                        </button>

                        <button class="launch-btn launch-copilot" id="copilotBtn" disabled>
                            <div class="launch-icon">
                                <i class="fas fa-plane"></i>
                            </div>
                            <div class="launch-text">
                                <div class="launch-name">Copilot</div>
                                <div class="launch-sub">copilot.microsoft.com</div>
                            </div>
                        </button>

                        <button class="launch-btn launch-grok" id="grokBtn" disabled>
                            <div class="launch-icon">
                                <i class="fas fa-bolt"></i>
                            </div>
                            <div class="launch-text">
                                <div class="launch-name">Grok</div>
                                <div class="launch-sub">x.ai</div>
                            </div>
                        </button>
                    </div>

                    <!-- OLD EXPLANATION - KEPT FOR CSS COMPATIBILITY -->
                    <div id="ai-ranking-explanation" class="ai-ranking-explanation hidden">
                        <i class="fas fa-sort-amount-down"></i>
                        <strong>Ranked by: </strong>
                        <span id="ai-ranking-reasons"></span>
                    </div>
                </section>
            </div>
        </main>

        <!-- FOOTER -->
        <footer class="footer">
            <div class="footer-left">
                <span>
                    <i class="fas fa-shield-alt"></i> Local processing • No data sent
                </span>
                <span class="dot">•</span>
                <span>
                    <i class="fas fa-code-branch"></i> v3.1
                </span>
            </div>
            <div class="footer-right">
                <div id="usageCount">
                    <i class="fas fa-bolt"></i> 0 prompts generated
                </div>
            </div>
        </footer>
    </div>

    <!-- SETTINGS MODAL -->
    <div id="settingsModal" class="modal-backdrop" style="display: none;">
        <div class="modal">
            <div class="modal-header">
                <h3><i class="fas fa-cog"></i> Settings</h3>
                <button id="closeSettingsBtn" class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <!-- ===================== SECURITY FIX: API KEY SECTION COMMENTED OUT ===================== -->
                <!--
                <div class="form-group">
                    <label class="form-label" for="apiKeyInput">
                        <i class="fas fa-key"></i> OpenAI API Key
                    </label>
                    <input type="password" id="apiKeyInput" class="input-text" placeholder="sk-...">
                    <div class="form-hint">
                        <i class="fas fa-info-circle"></i>
                        Optional. Without key, uses offline generation.
                    </div>
                </div>
                -->
                <!-- ===================== END OF COMMENTED SECTION ===================== -->
                
                <div class="form-group">
                    <label class="form-label" for="autoConvertDelay">
                        <i class="fas fa-clock"></i> Auto-Convert Delay
                    </label>
                    <input type="range" id="autoConvertDelay" min="5" max="120" value="60" class="input-text">
                    <div class="form-hint">
                        <i class="fas fa-sliders-h"></i>
                        <span id="delayValue">Current: 60 seconds</span>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="voiceLanguage">
                        <i class="fas fa-language"></i> Voice Language
                    </label>
                    <select id="voiceLanguage" class="input-text">
                        <option value="en-US">English (US)</option>
                        <option value="en-GB">English (UK)</option>
                        <option value="hi-IN">Hindi (India)</option>
                        <option value="es-ES">Spanish</option>
                        <option value="fr-FR">French</option>
                        <option value="de-DE">German</option>
                        <option value="ja-JP">Japanese</option>
                    </select>
                    <div class="form-hint">
                        <i class="fas fa-microphone"></i>
                        For voice input and output
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">
                        <i class="fas fa-expand-alt"></i> Textarea Sizing
                    </label>
                    <button id="resetSizesBtn" class="btn-ghost-small">
                        <i class="fas fa-undo"></i> Reset to Default (250px)
                    </button>
                    <div class="form-hint">
                        <i class="fas fa-arrows-alt-v"></i>
                        Drag textarea edges to resize. Click expand button for full-screen.
                    </div>
                </div>
                
                <div class="modal-actions">
                    <button id="clearDataBtn" class="btn-ghost-small danger">
                        <i class="fas fa-trash"></i> Clear All Data
                    </button>
                    <button id="saveSettingsBtn" class="btn-primary">
                        <i class="fas fa-save"></i> Save Settings
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- TEMPLATE MODAL -->
    <div id="templateModal" class="modal-backdrop" style="display: none;">
        <div class="modal">
            <div class="modal-header">
                <h3><i class="fas fa-save"></i> Save Template</h3>
                <button id="closeTemplateBtn" class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label" for="templateName">
                        <i class="fas fa-heading"></i> Template Name
                    </label>
                    <input type="text" id="templateName" class="input-text" placeholder="Professional Email Template">
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="templateDescription">
                        <i class="fas fa-align-left"></i> Description
                    </label>
                    <input type="text" id="templateDescription" class="input-text" placeholder="Write professional business emails">
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="templateCategory">
                        <i class="fas fa-folder"></i> Category
                    </label>
                    <select id="templateCategory" class="input-text">
                        <option value="communication">Communication</option>
                        <option value="coding">Coding</option>
                        <option value="writing">Writing</option>
                        <option value="analysis">Analysis</option>
                        <option value="business">Business</option>
                        <option value="creative">Creative</option>
                        <option value="education">Education</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="templateContent">
                        <i class="fas fa-code"></i> Template Content
                    </label>
                    <textarea id="templateContent" class="input-text" rows="6" placeholder="Template content..."></textarea>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="templateExample">
                        <i class="fas fa-lightbulb"></i> Example Requirement
                    </label>
                    <textarea id="templateExample" class="input-text" rows="3" placeholder="Example requirement that triggers this template..."></textarea>
                </div>
                
                <div class="modal-actions">
                    <button id="cancelTemplateBtn" class="btn-ghost-small">
                        Cancel
                    </button>
                    <button id="saveTemplateBtn" class="btn-primary">
                        <i class="fas fa-save"></i> Save Template
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- SCRIPTS -->
    <script src="js/theme.js"></script>
    <script src="js/voice.js"></script>
    <script src="js/intent.js"></script>
    <!-- AI TOOL RANKER IS NOW INTEGRATED INTO app.js -->
    <script src="js/app.js"></script>
</body>
</html>
